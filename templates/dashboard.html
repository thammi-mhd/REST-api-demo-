{% extends "base.html" %} {% block head %}
<title>Dashboard - TaskBoard</title>
<style>
  body {
    background: #f3f4f6;
    margin: 0;
  }
</style>
{% endblock %} {% block body %}
<div class="dashboard">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h2 class="logo">âœ“ TaskBoard</h2>
    <p id="userRole" class="role"></p>

    <nav>
      <button class="nav-btn active">Dashboard</button>
      <button class="nav-btn" onclick="logout()">Logout</button>
    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">
    <header class="topbar">
      <h1 id="welcome">Welcome</h1>
    </header>

    <!-- CREATE TASK -->
    <section class="card">
      <h3>Create New Task</h3>
      <input id="taskTitle" placeholder="Task title" />
      <input id="taskDesc" placeholder="Task description (optional)" />
      <button onclick="createTask()">Add Task</button>
      <p id="taskMessage"></p>
    </section>

    <!-- TASK LIST -->
    <section class="card">
      <h3>Your Tasks</h3>
      <ul id="taskList"></ul>
    </section>

    <!-- ADMIN PANEL -->
    <section class="card admin-only" id="adminPanel" style="display: none">
      <h3>Admin Panel</h3>

      <!-- Users Management -->
      <div class="admin-section">
        <h4>Users Management</h4>
        <button onclick="loadUsers()" class="btn-primary">
          View All Users
        </button>
        <button onclick="deleteAllUsers()" class="btn-danger">
          Delete All Users
        </button>
        <p id="adminMessage"></p>
        <div class="user-list-container">
          <table id="userTable" style="width: 100%; border-collapse: collapse">
            <thead>
              <tr>
                <th style="padding: 10px; text-align: left">ID</th>
                <th style="padding: 10px; text-align: left">Name</th>
                <th style="padding: 10px; text-align: left">Email</th>
                <th style="padding: 10px; text-align: left">Role</th>
                <th style="padding: 10px; text-align: left">Actions</th>
              </tr>
            </thead>
            <tbody id="userList"></tbody>
          </table>
        </div>
      </div>

      <!-- Statistics -->
      <div
        class="admin-section"
        style="
          margin-top: 20px;
          padding-top: 20px;
          border-top: 1px solid #e5e7eb;
        "
      >
        <h4>Statistics</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
          <div
            style="
              background: linear-gradient(135deg, #b3b7ca 0%, #8d809a 100%);
              padding: 20px;
              border-radius: 8px;
              color: white;
            "
          >
            <p style="margin: 0; opacity: 0.9; font-size: 0.9rem">
              Total Users
            </p>
            <p
              style="margin: 10px 0 0 0; font-size: 2rem; font-weight: bold"
              id="totalUsers"
            >
              0
            </p>
          </div>
          <div
            style="
              background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
              padding: 20px;
              border-radius: 8px;
              color: white;
            "
          >
            <p style="margin: 0; opacity: 0.9; font-size: 0.9rem">
              Total Tasks
            </p>
            <p
              style="margin: 10px 0 0 0; font-size: 2rem; font-weight: bold"
              id="totalTasks"
            >
              0
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
