{% extends "base.html" %} {% block head %}
<title>Register - TaskBoard</title>
{% endblock %} {% block body %}
<div class="container">
  <div class="heading">Create your account</div>
  <div class="subheading">Get started in less than a minute</div>

  <!-- MESSAGE BOX -->
  <div id="message" class="message-box"></div>

  <form class="form" id="registerForm">
    <div class="input-field">
      <input type="text" id="name" name="name" required autofocus />
      <label for="name">ðŸ‘¤ Full Name</label>
    </div>

    <div class="input-field">
      <input type="email" id="email" name="email" required />
      <label for="email">Email</label>
    </div>

    <div class="input-field password-field">
      <input type="password" id="password" name="password" required />
      <label for="password">Password</label>
      <button
        type="button"
        class="toggle-password"
        onclick="togglePasswordVisibility('password')"
      >
        view
      </button>
      <small class="helper-text">Minimum 6 characters recommended</small>
    </div>

    <div class="input-field password-field">
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        required
      />
      <label for="confirm_password">Confirm Password</label>
      <button
        type="button"
        class="toggle-password"
        onclick="togglePasswordVisibility('confirm_password')"
      >
        view
      </button>
      <small class="helper-text" id="passwordMatch"></small>
    </div>

    <div class="btn-container">
      <button class="btn" id="registerBtn" type="submit">Create Account</button>
      <div class="acc-text">
        Already have an account?
        <a href="{{ url_for('login_page') }}">Login</a>
      </div>
    </div>
  </form>
</div>

<script>
  function togglePasswordVisibility(fieldId) {
    const field = document.getElementById(fieldId);
    const btn = event.target;
    if (field.type === "password") {
      field.type = "text";
      btn.textContent = "hide";
    } else {
      field.type = "password";
      btn.textContent = "view";
    }
  }

  // Real-time password match feedback
  document
    .getElementById("confirm_password")
    ?.addEventListener("input", function () {
      const password = document.getElementById("password").value;
      const confirm = this.value;
      const feedback = document.getElementById("passwordMatch");

      if (confirm && password !== confirm) {
        feedback.textContent = "Passwords do not match";
        feedback.style.color = "#ef4444";
      } else if (confirm && password === confirm) {
        feedback.textContent = "Passwords match";
        feedback.style.color = "#22c55e";
      } else {
        feedback.textContent = "";
      }
    });

  // Also check when main password changes
  document.getElementById("password")?.addEventListener("input", function () {
    const confirm = document.getElementById("confirm_password").value;
    const feedback = document.getElementById("passwordMatch");

    if (confirm && this.value !== confirm) {
      feedback.textContent = "Passwords do not match";
      feedback.style.color = "#ef4444";
    } else if (confirm && this.value === confirm) {
      feedback.textContent = "Passwords match";
      feedback.style.color = "#22c55e";
    } else {
      feedback.textContent = "";
    }
  });
</script>
{% endblock %}
